<!DOCTYPE html>

<html lang="en">

  <head>

    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>ğŸš€ WorldLink Network Testnet</title>

    <script src="https://sdk.minepi.com/pi-sdk.js"></script>

    <style>

      body {

        font-family: Arial, sans-serif;

        background-color: black;

        color: aqua;

        text-align: center;

        padding: 40px;

      }

      button {

        background-color: gold;

        color: black;

        font-weight: bold;

        padding: 10px 20px;

        border: none;

        border-radius: 8px;

        cursor: pointer;

      }

      #status {

        margin-top: 20px;

        font-size: 18px;

      }

    </style>

  </head>



  <body>

    <h2>ğŸš€ WorldLink Network Testnet is Live!</h2>

    <p>Connected to Pi Testnet via Express Server</p>



    <button id="payButton">Pay with Pi</button>

    <p id="status">ğŸŸ¢ Ready</p>



    <script>

      // ğŸŸ¢ ToÃ n bá»™ xá»­ lÃ½ chÃ­nh

      window.onload = () => {

        console.log("ğŸ§© Loading Pi SDK...");

        document.getElementById("status").innerText = "ğŸ”„ Initializing Pi SDK...";



        // ğŸŸ£ Khá»Ÿi táº¡o Pi SDK

        Pi.init({ version: "2.0", sandbox: true });

        console.log("âœ… Pi SDK initialized.");



        // ğŸ§  Kiá»ƒm tra SDK

        if (typeof Pi === "undefined") {

          document.getElementById("status").innerText =

            "âš ï¸ Pi SDK is NOT loaded. Please open in Pi Browser.";

          console.error("âš ï¸ Pi SDK not detected.");

          return;

        } else {

          document.getElementById("status").innerText =

            "âœ… Pi SDK detected successfully.";

          console.log("âœ… Pi SDK detected successfully:", Pi);

        }



        // ğŸŸ£ NÃºt thanh toÃ¡n

        const payButton = document.getElementById("payButton");

        payButton.addEventListener("click", async () => {

          try {

            console.log("ğŸ’° Starting Pi Test Payment...");

            document.getElementById("status").innerText = "ğŸ’³ Processing payment...";



            const payment = await Pi.createPayment({

              amount: 0.01,

              memo: "WorldLink Test Payment",

              metadata: { type: "test" },

              onReadyForServerApproval: (paymentId) => {

                console.log("ğŸŸ¡ Ready for server approval:", paymentId);

              },

              onReadyForServerCompletion: (paymentId, txid) => {

                console.log("ğŸŸ¢ Ready for completion:", paymentId, txid);

              },

              onCancel: () => {

                console.warn("âŒ Payment cancelled by user.");

                document.getElementById("status").innerText = "âŒ Payment cancelled.";

              },

              onError: (error) => {

                console.error("âŒ Payment failed:", error);

                document.getElementById("status").innerText =

                  "âŒ Payment failed or cancelled.";

              },

            });



            console.log("âœ… Payment object:", payment);

          } catch (err) {

            console.error("âš ï¸ Error creating payment:", err);

            document.getElementById("status").innerText =

              "âš ï¸ Error starting payment.";

          }

        });



        // ğŸ§© Báº¯t lá»—i toÃ n cá»¥c Ä‘á»ƒ debug

        window.onerror = function (msg, url, line, col, error) {

          console.error("âš ï¸ JS Error:", msg, "at", line + ":" + col, error);

          document.getElementById("status").innerText =

            "âš ï¸ JS Error: " + msg + " (line " + line + ")";

        };

      };

    </script>

  </body>

</html>

